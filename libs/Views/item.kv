#:import Window kivy.core.window.Window

<LoaderLabel>:
    canvas.after:
        Color:
            rgba: self.loading_color
        RoundedRectangle:
            pos: self.pos
            size: self.default_size_x, self.default_size_y
            radius: [8]

<ItemScreen>:
    MDScrollView:
        do_scroll_x: False
        do_scroll_y: True
        always_overscroll: False
        MDAnchorLayout:
            anchor_x: 'center'
            anchor_y: 'top'
            size_hint_y: None
            height: all.height
            MDBoxLayout:
                id: all
                orientation: 'vertical'
                adaptive_height: True
                size_hint_x: None
                width: Window.size[0] if Window.size[0] < dp(1000) else dp(1000)
                padding: [dp(20), dp(10), dp(20), dp(20)]
                spacing: dp(10)
                MDBoxLayout:
                    id: info_table
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: max(card.height, information.height)
                    spacing: dp(10)
                    MDAnchorLayout:
                        anchor_y: 'top'
                        size_hint_x: None
                        width: card.width
                        HoverMDCardButton:
                            id: card
                            radius: [dp(8)]
                            orientation: 'vertical'
                            size_hint: None, None
                            width: dp(200)
                            height: self.width * 1.5
                            FitImage:
                                id: thumbnail
                                radius: [8, 8, 8, 8]
                                source: root.thumbnail
                    MDAnchorLayout:
                        anchor_y: 'top'
                        MDBoxLayout:
                            id: information
                            orientation: 'vertical'
                            spacing: dp(5)
                            adaptive_height: True
                            LoaderLabel:
                                text: root.title + root.year
                                font_style: 'H5'
                                size_hint: 1, None
                                default_size_x: dp(350)
                                default_size_y: dp(30)
                                height: self.texture_size[1] or dp(30)
                            LoaderLabel:
                                text: root.title_en
                                theme_text_color: "Custom"
                                text_color: app.theme_cls.accent_color
                                font_style: 'Caption'
                                size_hint: 1, None
                                default_size_x: dp(100)
                                default_size_y: dp(10)
                                height: self.texture_size[1] or dp(10)
                            LoaderLabel:
                                text: f'Слоган: {root.tagline}' if root.tagline else ''
                                font_style: 'Body1'
                                size_hint: 1, None
                                default_size_x: dp(500)
                                default_size_y: dp(20)
                                height: self.texture_size[1] or dp(20) if root.tagline != 'None' else 0
                                opacity: 1 if root.tagline != 'None' else 0
                            LoaderLabel:
                                text: f'Категория: {root.sub_type}' if root.sub_type else ''
                                font_style: 'Body1'
                                size_hint: 1, None
                                default_size_x: dp(100)
                                default_size_y: dp(20)
                                height: self.texture_size[1] or dp(20)
                            LoaderLabel:
                                text: f'Жанр: {root.genre}' if root.genre else ''
                                font_style: 'Body1'
                                size_hint: 1, None
                                default_size_x: dp(300)
                                default_size_y: dp(20)
                                height: self.texture_size[1] or dp(20)
                            LoaderLabel:
                                text: f'Рейтинг: {root.rate}' if root.rate else ''
                                font_style: 'Body1'
                                size_hint: 1, None
                                default_size_x: dp(100)
                                default_size_y: dp(20)
                                height: self.texture_size[1] or dp(20)
                            LoaderLabel:
                                text: f'Дата выхода: {root.date}' if root.date else ''
                                font_style: 'Body1'
                                size_hint: 1, None
                                default_size_x: dp(200)
                                default_size_y: dp(20)
                                height: self.texture_size[1] or dp(20)
                            LoaderLabel:
                                text: f'Возраст: {root.age}' if root.age else ''
                                font_style: 'Body1'
                                size_hint: 1, None
                                default_size_x: dp(200)
                                default_size_y: dp(20)
                                height: self.texture_size[1] or dp(20)
                            LoaderLabel:
                                text: f'Длительность: {root.duration}' if root.duration else ''
                                font_style: 'Body1'
                                size_hint: 1, None
                                default_size_x: dp(200)
                                default_size_y: dp(20)
                                height: self.texture_size[1] or dp(20)
                LoaderLabel:
                    text: 'Описание:' if root.description else ''
                    font_style: 'H5'
                    size_hint: 1, None
                    default_size_x: dp(150)
                    default_size_y: dp(30)
                    height: self.texture_size[1] or dp(30)
                LoaderLabel:
                    multiline: True
                    text: root.description
                    font_style: 'Body1'
                    size_hint: 1, None
                    default_size_x: Window.size[0] - dp(20)
                    default_size_y: dp(100)
                    height: self.texture_size[1] or dp(100)
